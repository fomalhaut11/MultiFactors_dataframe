# æ‰¹é‡å› å­ç”Ÿæˆé…ç½®æ–‡ä»¶ ğŸ“‹
# å®šä¹‰æ‰€æœ‰å¯ç”Ÿæˆçš„å› å­åŠå…¶åˆ†ç»„å’Œå‚æ•°

# åŸºæœ¬é…ç½®
settings:
  output_dir: "E:/Documents/PythonProject/StockProject/StockData/factors"  # å› å­è¾“å‡ºç›®å½•
  parallel_jobs: 4                 # å¹¶è¡Œä½œä¸šæ•°
  cache_enabled: true              # å¯ç”¨ç¼“å­˜
  validation_enabled: true         # å¯ç”¨ç»“æœéªŒè¯
  backup_enabled: true            # å¯ç”¨è‡ªåŠ¨å¤‡ä»½

# å› å­åˆ†ç»„é…ç½®
factor_groups:
  
  # ğŸ’° è´¢åŠ¡å› å­ (Pure Financial Factors)
  financial:
    description: "åŸºäºè´¢åŠ¡æŠ¥è¡¨æ•°æ®çš„å› å­ï¼Œä¸ä¾èµ–å¸‚åœºæ•°æ®"
    enabled: true
    priority: 1
    
    # ç›ˆåˆ©èƒ½åŠ›å› å­ (Profitability) - 13ä¸ª
    profitability:
      - name: "ROE_ttm"
        description: "å‡€èµ„äº§æ”¶ç›Šç‡(TTM)"
        calculator: "PureFinancialFactorCalculator"
        method: "calculate_ROE_ttm"
        data_requirements: ["financial_data"]
        
      - name: "ROE_lyr"
        description: "å‡€èµ„äº§æ”¶ç›Šç‡(å¹´æŠ¥)"
        calculator: "PureFinancialFactorCalculator" 
        method: "calculate_ROE_lyr"
        data_requirements: ["financial_data"]
        
      - name: "ROA_ttm"
        description: "æ€»èµ„äº§æ”¶ç›Šç‡(TTM)"
        calculator: "PureFinancialFactorCalculator"
        method: "calculate_ROA_ttm"
        data_requirements: ["financial_data"]
        
      - name: "ROA_lyr"
        description: "æ€»èµ„äº§æ”¶ç›Šç‡(å¹´æŠ¥)"
        calculator: "PureFinancialFactorCalculator"
        method: "calculate_ROA_lyr"
        data_requirements: ["financial_data"]
        
      - name: "ROIC_ttm"
        description: "æŠ•å…¥èµ„æœ¬æ”¶ç›Šç‡"
        calculator: "PureFinancialFactorCalculator"
        method: "calculate_ROIC_ttm"
        data_requirements: ["financial_data"]
        
      - name: "GrossProfitMargin_ttm"
        description: "æ¯›åˆ©ç‡"
        calculator: "PureFinancialFactorCalculator"
        method: "calculate_GrossProfitMargin_ttm"
        data_requirements: ["financial_data"]
        
      - name: "NetProfitMargin_ttm"
        description: "å‡€åˆ©ç‡"
        calculator: "PureFinancialFactorCalculator"
        method: "calculate_NetProfitMargin_ttm"
        data_requirements: ["financial_data"]
        
      - name: "OperatingMargin_ttm"
        description: "è¥ä¸šåˆ©æ¶¦ç‡"
        calculator: "PureFinancialFactorCalculator"
        method: "calculate_OperatingMargin_ttm"
        data_requirements: ["financial_data"]
        
      - name: "EBITDAMargin_ttm"
        description: "EBITDAåˆ©æ¶¦ç‡"
        calculator: "PureFinancialFactorCalculator"
        method: "calculate_EBITDAMargin_ttm"
        data_requirements: ["financial_data"]
        
      - name: "InterestMargin_ttm"
        description: "å‡€æ¯å·®(é“¶è¡Œä¸š)"
        calculator: "PureFinancialFactorCalculator"
        method: "calculate_InterestMargin_ttm"
        data_requirements: ["financial_data"]
        
      - name: "CostIncomeRatio_ttm"
        description: "æˆæœ¬æ”¶å…¥æ¯”"
        calculator: "PureFinancialFactorCalculator"
        method: "calculate_CostIncomeRatio_ttm"
        data_requirements: ["financial_data"]
    
    # å¿å€ºèƒ½åŠ›å› å­ (Solvency) - 8ä¸ª
    solvency:
      - name: "CurrentRatio"
        description: "æµåŠ¨æ¯”ç‡"
        calculator: "PureFinancialFactorCalculator"
        method: "calculate_CurrentRatio"
        data_requirements: ["financial_data"]
        
      - name: "QuickRatio"
        description: "é€ŸåŠ¨æ¯”ç‡"
        calculator: "PureFinancialFactorCalculator"
        method: "calculate_QuickRatio"
        data_requirements: ["financial_data"]
        
      - name: "CashRatio"
        description: "ç°é‡‘æ¯”ç‡"
        calculator: "PureFinancialFactorCalculator"
        method: "calculate_CashRatio"
        data_requirements: ["financial_data"]
        
      - name: "DebtToAssets"
        description: "èµ„äº§è´Ÿå€ºç‡"
        calculator: "PureFinancialFactorCalculator"
        method: "calculate_DebtToAssets"
        data_requirements: ["financial_data"]
        
      - name: "DebtToEquity"
        description: "äº§æƒæ¯”ç‡"
        calculator: "PureFinancialFactorCalculator"
        method: "calculate_DebtToEquity"
        data_requirements: ["financial_data"]
        
      - name: "EquityMultiplier"
        description: "æƒç›Šä¹˜æ•°"
        calculator: "PureFinancialFactorCalculator"
        method: "calculate_EquityMultiplier"
        data_requirements: ["financial_data"]
        
      - name: "InterestCoverage_ttm"
        description: "åˆ©æ¯ä¿éšœå€æ•°"
        calculator: "PureFinancialFactorCalculator"
        method: "calculate_InterestCoverage_ttm"
        data_requirements: ["financial_data"]
        
      - name: "DebtServiceCoverage_ttm"
        description: "å€ºåŠ¡å¿ä»˜æ¯”ç‡"
        calculator: "PureFinancialFactorCalculator"
        method: "calculate_DebtServiceCoverage_ttm"
        data_requirements: ["financial_data"]
    
    # è¥è¿æ•ˆç‡å› å­ (Efficiency) - 9ä¸ª
    efficiency:
      - name: "AssetTurnover_ttm"
        description: "æ€»èµ„äº§å‘¨è½¬ç‡"
        calculator: "PureFinancialFactorCalculator"
        method: "calculate_AssetTurnover_ttm"
        data_requirements: ["financial_data"]
        
      - name: "EquityTurnover_ttm"
        description: "å‡€èµ„äº§å‘¨è½¬ç‡"
        calculator: "PureFinancialFactorCalculator"
        method: "calculate_EquityTurnover_ttm"
        data_requirements: ["financial_data"]
        
      - name: "InventoryTurnover_ttm"
        description: "å­˜è´§å‘¨è½¬ç‡"
        calculator: "PureFinancialFactorCalculator"
        method: "calculate_InventoryTurnover_ttm"
        data_requirements: ["financial_data"]
        
      - name: "AccountsReceivableTurnover_ttm"
        description: "åº”æ”¶è´¦æ¬¾å‘¨è½¬ç‡"
        calculator: "PureFinancialFactorCalculator"
        method: "calculate_AccountsReceivableTurnover_ttm"
        data_requirements: ["financial_data"]
        
      - name: "AccountsPayableTurnover_ttm"
        description: "åº”ä»˜è´¦æ¬¾å‘¨è½¬ç‡"
        calculator: "PureFinancialFactorCalculator"
        method: "calculate_AccountsPayableTurnover_ttm"
        data_requirements: ["financial_data"]
        
      - name: "CashCycle_ttm"
        description: "ç°é‡‘è½¬æ¢å‘¨æœŸ"
        calculator: "PureFinancialFactorCalculator"
        method: "calculate_CashCycle_ttm"
        data_requirements: ["financial_data"]
        
      - name: "WorkingCapitalTurnover_ttm"
        description: "è¥è¿èµ„æœ¬å‘¨è½¬ç‡"
        calculator: "PureFinancialFactorCalculator"
        method: "calculate_WorkingCapitalTurnover_ttm"
        data_requirements: ["financial_data"]
        
      - name: "FixedAssetTurnover_ttm"
        description: "å›ºå®šèµ„äº§å‘¨è½¬ç‡"
        calculator: "PureFinancialFactorCalculator"
        method: "calculate_FixedAssetTurnover_ttm"
        data_requirements: ["financial_data"]
  
  # ğŸ“ˆ æŠ€æœ¯å› å­ (Technical Factors)
  technical:
    description: "åŸºäºä»·æ ¼ã€æˆäº¤é‡ç­‰å¸‚åœºæ•°æ®çš„æŠ€æœ¯æŒ‡æ ‡å› å­"
    enabled: true
    priority: 2
    
    # ä»·æ ¼åŠ¨é‡å› å­ (Price Momentum)
    momentum:
      - name: "Price_Momentum_1M"
        description: "1ä¸ªæœˆä»·æ ¼åŠ¨é‡"
        calculator: "PriceFactorCalculator"
        method: "calculate_momentum"
        parameters: {"window": 22}
        data_requirements: ["price_data"]
        
      - name: "Price_Momentum_3M" 
        description: "3ä¸ªæœˆä»·æ ¼åŠ¨é‡"
        calculator: "PriceFactorCalculator"
        method: "calculate_momentum"
        parameters: {"window": 66}
        data_requirements: ["price_data"]
        
      - name: "Price_Momentum_6M"
        description: "6ä¸ªæœˆä»·æ ¼åŠ¨é‡"
        calculator: "PriceFactorCalculator"
        method: "calculate_momentum"
        parameters: {"window": 132}
        data_requirements: ["price_data"]
        
      - name: "Price_Momentum_12M"
        description: "12ä¸ªæœˆä»·æ ¼åŠ¨é‡"
        calculator: "PriceFactorCalculator"
        method: "calculate_momentum"
        parameters: {"window": 252}
        data_requirements: ["price_data"]
        
      - name: "Price_Reversal_1M"
        description: "1ä¸ªæœˆä»·æ ¼åè½¬"
        calculator: "PriceFactorCalculator"
        method: "calculate_reversal"
        parameters: {"window": 22}
        data_requirements: ["price_data"]
        
    # æ³¢åŠ¨ç‡å› å­ (Volatility)
    volatility:
      - name: "Volatility_1M"
        description: "1ä¸ªæœˆæ³¢åŠ¨ç‡"
        calculator: "VolatilityFactorCalculator"
        method: "calculate_volatility"
        parameters: {"window": 22}
        data_requirements: ["price_data"]
        
      - name: "Volatility_3M"
        description: "3ä¸ªæœˆæ³¢åŠ¨ç‡"
        calculator: "VolatilityFactorCalculator"
        method: "calculate_volatility"
        parameters: {"window": 66}
        data_requirements: ["price_data"]
        
      - name: "Volatility_6M"
        description: "6ä¸ªæœˆæ³¢åŠ¨ç‡"
        calculator: "VolatilityFactorCalculator"
        method: "calculate_volatility"
        parameters: {"window": 132}
        data_requirements: ["price_data"]
        
      - name: "Volatility_12M"
        description: "12ä¸ªæœˆæ³¢åŠ¨ç‡"
        calculator: "VolatilityFactorCalculator"
        method: "calculate_volatility"
        parameters: {"window": 252}
        data_requirements: ["price_data"]

  # ğŸ¯ é£é™©å› å­ (Risk Factors)
  risk:
    description: "å¸‚åœºé£é™©ã€Betaç­‰é£é™©ç›¸å…³å› å­"
    enabled: true
    priority: 3
    
    # Betaå› å­
    beta:
      - name: "Market_Beta"
        description: "å¸‚åœºBeta(é»˜è®¤252å¤©)"
        calculator: "BetaFactorCalculator"
        method: "calculate_market_beta"
        parameters: {"window": 252}
        data_requirements: ["price_data", "market_index"]
        
      - name: "Market_Beta_60D"
        description: "60å¤©å¸‚åœºBeta"
        calculator: "BetaFactorCalculator"
        method: "calculate_market_beta"
        parameters: {"window": 60}
        data_requirements: ["price_data", "market_index"]
        
      - name: "Market_Beta_120D"
        description: "120å¤©å¸‚åœºBeta"
        calculator: "BetaFactorCalculator"
        method: "calculate_market_beta"
        parameters: {"window": 120}
        data_requirements: ["price_data", "market_index"]
        
      - name: "Downside_Beta"
        description: "ä¸‹è¡ŒBeta"
        calculator: "BetaFactorCalculator"
        method: "calculate_downside_beta"
        data_requirements: ["price_data", "market_index"]
        
      - name: "Beta_Stability"
        description: "Betaç¨³å®šæ€§"
        calculator: "BetaFactorCalculator"
        method: "calculate_beta_stability"
        data_requirements: ["price_data", "market_index"]

  # ğŸ¢ æ··åˆå› å­ (Mixed Factors - éœ€è¦å¤šç§æ•°æ®)
  mixed:
    description: "éœ€è¦å¤šç§æ•°æ®æºçš„ç»¼åˆå› å­"
    enabled: true
    priority: 4
    
    # ä¼°å€¼å› å­ (Valuation)
    valuation:
      - name: "BP"
        description: "å‡€èµ„äº§å¸‚å€¼æ¯”(Book-to-Price)"
        calculator: "ValuationFactorCalculator"
        method: "calculate_BP"
        data_requirements: ["financial_data", "market_cap"]
        
      - name: "EP_ttm"
        description: "æ”¶ç›Šå¸‚å€¼æ¯”(Earnings-to-Price TTM)"
        calculator: "ValuationFactorCalculator"
        method: "calculate_EP_ttm"
        data_requirements: ["financial_data", "market_cap"]
        
      - name: "SP_ttm"
        description: "é”€å”®æ”¶å…¥å¸‚å€¼æ¯”(Sales-to-Price TTM)"
        calculator: "ValuationFactorCalculator"
        method: "calculate_SP_ttm"
        data_requirements: ["financial_data", "market_cap"]
        
      - name: "CFP_ttm"
        description: "ç°é‡‘æµå¸‚å€¼æ¯”(CashFlow-to-Price TTM)"
        calculator: "ValuationFactorCalculator"
        method: "calculate_CFP_ttm"
        data_requirements: ["financial_data", "market_cap"]
        
    # è§„æ¨¡å› å­ (Size)
    size:
      - name: "Size"
        description: "å¸‚å€¼è§„æ¨¡å› å­"
        calculator: "custom"  # ç‰¹æ®Šå¤„ç†
        method: "direct_market_cap"
        data_requirements: ["market_cap"]
        
      - name: "LogSize"
        description: "å¯¹æ•°å¸‚å€¼è§„æ¨¡å› å­"
        calculator: "custom"  # ç‰¹æ®Šå¤„ç†
        method: "log_market_cap"
        data_requirements: ["market_cap"]
    
    # ç›ˆä½™æƒŠå–œå› å­
    earnings_surprise:
      - name: "SUE"
        description: "æ ‡å‡†åŒ–æœªé¢„æœŸç›ˆä½™(Standardized Unexpected Earnings)"
        calculator: "SUEFactorCalculator"
        method: "calculate_SUE"
        data_requirements: ["financial_data", "release_dates"]

# å› å­ç”Ÿæˆé¢„è®¾æ¨¡å¼
generation_modes:
  # æ ¸å¿ƒå› å­ - æœ€é‡è¦çš„20ä¸ªå› å­
  core:
    description: "æ ¸å¿ƒå› å­é›†åˆï¼ŒåŒ…å«æœ€é‡è¦çš„å› å­"
    factors:
      - "ROE_ttm"
      - "ROA_ttm" 
      - "BP"
      - "EP_ttm"
      - "Size"
      - "LogSize"
      - "Price_Momentum_1M"
      - "Price_Momentum_12M"
      - "Volatility_1M"
      - "Volatility_3M"
      - "Market_Beta"
      - "CurrentRatio"
      - "DebtToAssets"
      - "AssetTurnover_ttm"
      - "RevenueGrowth_yoy"
      - "NetIncomeGrowth_yoy"
      - "OperatingCashFlowRatio_ttm"
      - "SUE"
      - "GrossProfitMargin_ttm"
      - "NetProfitMargin_ttm"
  
  # åŸºç¡€å› å­ - åŒ…å«å„ä¸ªå¤§ç±»çš„ä»£è¡¨æ€§å› å­
  basic:
    description: "åŸºç¡€å› å­é›†åˆï¼Œè¦†ç›–ä¸»è¦å› å­å¤§ç±»"
    factors:
      - "ROE_ttm"
      - "BP"
      - "Size"
      - "Price_Momentum_1M"
      - "Volatility_1M" 
      - "Market_Beta"
      - "CurrentRatio"
      - "AssetTurnover_ttm"
  
  # æµ‹è¯•å› å­ - ç”¨äºå¿«é€Ÿæµ‹è¯•
  test:
    description: "æµ‹è¯•ç”¨å› å­é›†åˆï¼Œæ•°é‡è¾ƒå°‘"
    factors:
      - "ROE_ttm"
      - "BP"
      - "Size"
      - "Price_Momentum_1M"
      
# æ•°æ®è¦æ±‚æ˜ å°„ 
data_requirements:
  financial_data:
    file_path: "data/auxiliary/FinancialData_unified.pkl"
    description: "ç»Ÿä¸€æ ¼å¼çš„è´¢åŠ¡æ•°æ®"
    required: true
    
  market_cap:
    file_path: "MarketCap.pkl"
    alt_paths: ["LogMarketCap.pkl", "data/auxiliary/MarketCap.pkl"]
    description: "å¸‚å€¼æ•°æ®"
    required: false
    
  price_data:
    file_path: "Price.pkl"
    description: "æ—¥çº¿ä»·æ ¼æ•°æ®"
    required: false
    
  release_dates:
    file_path: "data/auxiliary/ReleaseDates.pkl" 
    description: "è´¢æŠ¥å‘å¸ƒæ—¥æœŸæ•°æ®"
    required: false
    
  trading_dates:
    file_path: "data/auxiliary/TradingDates.pkl"
    description: "äº¤æ˜“æ—¥å†æ•°æ®"  
    required: false
    
  market_index:
    file_path: "MarketIndex.pkl"
    description: "å¸‚åœºæŒ‡æ•°æ•°æ®(è®¡ç®—Betaç”¨)"
    required: false

# è´¨é‡æ§åˆ¶é…ç½®
quality_control:
  # æ•°æ®è´¨é‡é˜ˆå€¼
  max_null_ratio: 0.7        # æœ€å¤§ç©ºå€¼æ¯”ä¾‹
  max_inf_count: 1000        # æœ€å¤§æ— ç©·å€¼æ•°é‡
  min_unique_count: 10       # æœ€å°å”¯ä¸€å€¼æ•°é‡
  min_quality_score: 60      # æœ€å°è´¨é‡åˆ†æ•°
  
  # è‡ªåŠ¨ä¿®å¤é€‰é¡¹
  auto_fix_inf: true         # è‡ªåŠ¨ä¿®å¤æ— ç©·å€¼
  auto_fill_null: false      # è‡ªåŠ¨å¡«å……ç©ºå€¼(æ…ç”¨)
  outlier_detection: true    # å¼‚å¸¸å€¼æ£€æµ‹
  
# è¾“å‡ºé…ç½®
output:
  save_format: "pickle"      # ä¿å­˜æ ¼å¼: pickle, csv, hdf5
  compression: true          # å¯ç”¨å‹ç¼©
  backup_count: 3            # å¤‡ä»½æ–‡ä»¶æ•°é‡
  generate_report: true      # ç”ŸæˆHTMLæŠ¥å‘Š
  
# æ—¥å¿—é…ç½®
logging:
  level: "INFO"              # æ—¥å¿—çº§åˆ«: DEBUG, INFO, WARNING, ERROR
  save_log: true             # ä¿å­˜æ—¥å¿—æ–‡ä»¶
  log_rotation: true         # æ—¥å¿—è½®è½¬
  max_log_size: "10MB"       # æœ€å¤§æ—¥å¿—æ–‡ä»¶å¤§å°